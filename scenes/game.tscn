[gd_scene format=4 uid="uid://ceqdt0gehucwl"]

[ext_resource type="PackedScene" uid="uid://cdpnattf4wp82" path="res://scenes/player.tscn" id="1_80nbo"]
[ext_resource type="Script" uid="uid://d4hdeedtuc7dl" path="res://scripts/GasMask.cs" id="2_p57ef"]
[ext_resource type="Script" uid="uid://f8l25rbd2kah" path="res://scripts/PlayerInteract2D.cs" id="2_u5sy4"]
[ext_resource type="Texture2D" uid="uid://bekiiuhduagg5" path="res://assets/sprites/walls.png" id="2_yqjtg"]
[ext_resource type="Texture2D" uid="uid://d0mwwfrd1d6wy" path="res://assets/sprites/FloorTiles.png" id="3_lnu2h"]
[ext_resource type="Script" uid="uid://cxtwoq6eigwt1" path="res://scripts/ContaminatedZone.cs" id="4_lbhrr"]
[ext_resource type="PackedScene" uid="uid://dwqyxwysjmsd0" path="res://scenes/puzzle_terminal_2d.tscn" id="4_p57ef"]
[ext_resource type="Texture2D" uid="uid://v7b01pq6h4p7" path="res://assets/sprites/wall tiles (3).png" id="6_dinhu"]
[ext_resource type="Shader" uid="uid://qistlvpuu28r" path="res://scripts/shaders/contaminated.gdshader" id="6_u5sy4"]
[ext_resource type="Texture2D" uid="uid://jp17vl6tjiv1" path="res://assets/sprites/wall new.png" id="7_kvuet"]
[ext_resource type="Script" uid="uid://k3g6mo4v5ip5" path="res://scripts/puzzles/core/PuzzleHost.cs" id="9_0tnpc"]
[ext_resource type="PackedScene" uid="uid://dt0es7t2m522x" path="res://scenes/chimp_puzzle.tscn" id="10_vtaks"]
[ext_resource type="Script" uid="uid://cmp5yhunkqfnr" path="res://scripts/puzzles/core/PuzzleEntry.cs" id="11_trtic"]
[ext_resource type="PackedScene" uid="uid://brqksdxt4tt8l" path="res://scenes/door.tscn" id="12_dinhu"]
[ext_resource type="Texture2D" uid="uid://duyp6cbcpx2d4" path="res://assets/sprites/Workbench.png" id="12_kvuet"]
[ext_resource type="PackedScene" uid="uid://dvrg2mquj2afg" path="res://scenes/hanoi_puzzle.tscn" id="13_ir15t"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_lbhrr"]
texture = ExtResource("3_lnu2h")
0:0/size_in_atlas = Vector2i(2, 2)
0:0/0 = 0
2:0/size_in_atlas = Vector2i(2, 2)
2:0/0 = 0
4:0/size_in_atlas = Vector2i(2, 2)
4:0/0 = 0
6:0/size_in_atlas = Vector2i(2, 2)
6:0/0 = 0
0:2/size_in_atlas = Vector2i(2, 2)
0:2/0 = 0
2:2/size_in_atlas = Vector2i(2, 2)
2:2/0 = 0
4:2/size_in_atlas = Vector2i(2, 2)
4:2/0 = 0
6:2/size_in_atlas = Vector2i(2, 2)
6:2/0 = 0
0:4/size_in_atlas = Vector2i(2, 2)
0:4/0 = 0
2:4/size_in_atlas = Vector2i(2, 2)
2:4/0 = 0
4:4/size_in_atlas = Vector2i(2, 2)
4:4/0 = 0
6:4/size_in_atlas = Vector2i(2, 2)
6:4/0 = 0

[sub_resource type="TileSet" id="TileSet_iywne"]
tile_size = Vector2i(32, 32)
sources/0 = SubResource("TileSetAtlasSource_lbhrr")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_yqjtg"]
texture = ExtResource("2_yqjtg")
2:0/size_in_atlas = Vector2i(2, 2)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -10, 16, -10, 16, 16, -16, 16)
4:0/size_in_atlas = Vector2i(2, 2)
4:0/0 = 0
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -11, -11, -16, 11, -16, 16, -11, 16, 11, 11, 16, -16, 16)
0:2/size_in_atlas = Vector2i(2, 2)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-10, -16, 16, -16, 16, 16, -10, 16)
4:2/size_in_atlas = Vector2i(2, 2)
4:2/0 = 0
4:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(10, 16, -16, 16, -16, -16, 10, -16)
0:4/size_in_atlas = Vector2i(2, 2)
0:4/0 = 0
0:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -11, -11, -16, 16, -16, 16, 11, 11, 16, -11, 16, -16, 11)
2:4/size_in_atlas = Vector2i(2, 2)
2:4/0 = 0
2:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, 10, 16, 10, 16, -16, -16, -16)
4:4/size_in_atlas = Vector2i(2, 2)
4:4/0 = 0
4:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 11, -16, 16, -11, 16, 11, 11, 16, -11, 16, -16, 11)
0:0/size_in_atlas = Vector2i(2, 2)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(11, -16, 16, -11, 16, 16, -11, 16, -16, 11, -16, -11, -11, -16)
6:0/size_in_atlas = Vector2i(2, 2)
6:0/0 = 0
6:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-10, -10, -10, 16, 16, 16, 16, -10)
8:0/size_in_atlas = Vector2i(2, 2)
8:0/0 = 0
8:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -10, 10, -10, 10, 16, -16, 16)
6:2/size_in_atlas = Vector2i(2, 2)
6:2/0 = 0
6:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(16, -16, 16, 9, -10, 9, -10, -16)
8:2/size_in_atlas = Vector2i(2, 2)
8:2/0 = 0
8:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 10, -16, 10, 9, -16, 9)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_trtic"]
texture = ExtResource("6_dinhu")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
1:1/0 = 0
1:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
2:1/0 = 0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
1:2/0 = 0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
2:2/0 = 0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
0:3/0 = 0
0:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
1:3/0 = 0
1:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
2:3/0 = 0
2:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
0:4/0 = 0
0:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
1:4/0 = 0
1:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
2:4/0 = 0
2:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ir15t"]
texture = ExtResource("7_kvuet")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16)
0:3/0 = 0
0:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-16, -16, 16, -16, 16, 16, -16, 16, -16, -15.596977)

[sub_resource type="TileSet" id="TileSet_lnu2h"]
tile_size = Vector2i(32, 32)
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_yqjtg")
sources/1 = SubResource("TileSetAtlasSource_trtic")
sources/2 = SubResource("TileSetAtlasSource_ir15t")

[sub_resource type="Curve" id="Curve_lbhrr"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_p57ef"]
shader = ExtResource("6_u5sy4")
shader_parameter/gas_color = Color(0.24313726, 0.21568628, 0, 1)
shader_parameter/vapor_color = Color(0.20392157, 0.19607843, 0, 1)

[sub_resource type="Resource" id="Resource_ir15t"]
script = ExtResource("11_trtic")
Id = "chimp"
Scene = ExtResource("10_vtaks")
metadata/_custom_type_script = "uid://cmp5yhunkqfnr"

[sub_resource type="Resource" id="Resource_ca42v"]
script = ExtResource("11_trtic")
Id = "hanoi"
Scene = ExtResource("13_ir15t")
metadata/_custom_type_script = "uid://cmp5yhunkqfnr"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dinhu"]
size = Vector2(256, 168)

[node name="Game" type="Node2D" unique_id=1014954538]

[node name="Door" parent="." unique_id=890238121 instance=ExtResource("12_dinhu")]
position = Vector2(0, -832)

[node name="Player" parent="." unique_id=1240282193 groups=["player"] instance=ExtResource("1_80nbo")]
position = Vector2(7, -203)
motion_mode = 1
MovementSpeed = 350.0

[node name="Camera2D" type="Camera2D" parent="Player" unique_id=1913619694]
position = Vector2(-7, 211)
zoom = Vector2(0.5, 0.5)

[node name="Interactor" type="Node2D" parent="Player" unique_id=175824916]
script = ExtResource("2_u5sy4")

[node name="GasMask" type="Node2D" parent="." unique_id=1749282028]
script = ExtResource("2_p57ef")
metadata/_custom_type_script = "uid://d4hdeedtuc7dl"

[node name="Floor" type="TileMapLayer" parent="." unique_id=792315830]
z_index = -1
scale = Vector2(4, 4)
tile_map_data = PackedByteArray("AAANABsAAAAAAAAAAAD4////AAAAAAAAAAD5////AAAAAAAAAAD6////AAAAAAAAAAD7////AAAAAAAAAAD8////AAAAAAAAAAD4/wAAAAAAAAQAAAD6/wAAAAAAAAAAAAD7/wAAAAAEAAAAAAD8/wAAAAAAAAAAAAD5/wAAAAAAAAAAAAD9/wAAAAAEAAQAAAD9////AAAAAAAAAAD7/wEAAAACAAQAAAD8/wEAAAAGAAIAAAD8/wIAAAAEAAIAAAD9/wIAAAAAAAAAAAD+/wIAAAAAAAAAAAD+/wEAAAAEAAAAAAD+/wAAAAAAAAQAAAD+////AAAAAAIAAAD9/wEAAAAAAAAAAAD//wAAAAAGAAIAAFD/////AAACAAIAAAAAAP//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAD//wEAAAAAAAAAAAD6/wEAAAAAAAIAAAD5/wEAAAAAAAAAAAD4/wEAAAAAAAAAAAD4/wIAAAAAAAAAAAD5/wIAAAAAAAAAAAD6/wIAAAAAAAQAAAD7/wIAAAACAAQAAAD6/wMAAAAGAAIAAGD5/wMAAAAAAAAAAAD4/wMAAAAGAAQAAFD7/wMAAAAGAAAAAAD8/wMAAAAAAAAAAAD9/wMAAAAEAAQAAAD//wIAAAAAAAAAAAAAAAIAAAAEAAAAAAD+/wMAAAAAAAAAAAD//wMAAAAAAAAAAAAAAAMAAAAAAAAAAAD+//v/AAACAAIAAAD+//z/AAAGAAAAAAD+//3/AAAAAAAAAAD+//7/AAAAAAAAAAD///7/AAAAAAAAAAD///3/AAAAAAAAAAD///z/AAAAAAAAAAD///v/AAAAAAAAAAAAAPz/AAAGAAQAAAAAAP3/AAAAAAAAAAAAAPv/AAAAAAAAAAAAAP7/AAAAAAAAAAD+//r/AAAAAAAAAAD+//n/AAAEAAQAAAD+//j/AAAAAAAAAAD///j/AAAEAAQAAAD///n/AAACAAAAAAD///r/AAACAAAAAFAAAPr/AAAAAAAAAAAAAPn/AAAAAAAAAAAAAPj/AAAAAAAAAAD9//v/AAAAAAAAAAD9//r/AAAAAAAAAAD9//n/AAAAAAAAAAD9//j/AAAAAAAAAAA=")
tile_set = SubResource("TileSet_iywne")

[node name="Walls" type="TileMapLayer" parent="." unique_id=2015548460]
z_index = -1
scale = Vector2(4, 4)
tile_map_data = PackedByteArray("AAD3//v/AgAAAAAAAAD4//v/AgAAAAEAAFD5//v/AgAAAAEAAFD6//v/AgAAAAMAAGD7//v/AgAAAAMAAGD3/wEAAgAAAAEAAAD3/wAAAgAAAAEAAAD3////AgAAAAEAAAD3//7/AgAAAAEAAAD3//3/AgAAAAEAAAD3//z/AgAAAAEAAAD6//z/AQABAAMAAAD5//z/AQABAAEAAAD4//z/AQABAAQAAAD7//z/AQAAAAIAAAD7//7/AQACAAQAAAD6//7/AQABAAIAAAD5//7/AQABAAIAAAD4//7/AQABAAIAAAD5//3/AQABAAEAACD6//3/AQAAAAIAAAD4//3/AQAAAAAAAAD7//3/AQACAAIAAAD8//3/AQACAAQAAAD8//z/AQACAAIAAAD8//7/AQABAAAAAAD9//r/AgAAAAMAADD9//n/AgAAAAMAADD9//j/AgAAAAMAADD9//v/AgAAAAIAAAD8//v/AgAAAAMAAGD9//f/AAACAAAAAAD8//f/AAACAAAAAAD5//f/AAAAAAAAAAD5//j/AAAAAAIAAAD5//n/AAAAAAIAAAD5//r/AAAAAAIAAAD3/wIAAgAAAAEAAAD3/wMAAgAAAAEAAAD3/wQAAgAAAAAAAAD4/wQAAAACAAQAAAD5/wQAAAACAAQAAAD6/wQAAAACAAQAAAD7/wQAAAACAAQAAAD8/wQAAAACAAQAAAD9/wQAAAACAAQAAAD+/wQAAAACAAQAAAD//wQAAAACAAQAAAAAAAQAAAACAAQAAAABAAQAAAAEAAQAAAABAAMAAAAEAAIAAAABAAIAAAAEAAIAAAABAAEAAAAEAAIAAAABAAAAAAAEAAIAAAABAP//AAAEAAIAAAABAP7/AAAEAAIAAAABAP3/AAAEAAIAAAABAPz/AAAEAAIAAAABAPv/AAAEAAIAAAABAPr/AAAEAAIAAAABAPn/AAAEAAIAAAABAPj/AAAEAAIAAAABAPf/AAAIAAIAAGACAPf/AAACAAAAAAADAPf/AAACAAAAAAAEAPf/AAACAAAAAAAFAPf/AAACAAAAAAAGAPf/AAACAAAAAAAHAPf/AAACAAAAAAAIAPf/AAACAAAAAAAJAPf/AAAGAAIAADAJAPb/AAAEAAIAAAAJAPX/AAAEAAIAAAAJAPP/AAAEAAIAAAAJAPT/AAAEAAIAAAAJAPL/AAAEAAIAAAAJAPH/AAAEAAIAAAAJAPD/AAAEAAIAAAD+//f/AAACAAAAAAD9//z/AQACAAQAAAD9//3/AQACAAMAAAD9//7/AQACAAAAAAD+//r/AQABAAEAACD+//n/AQABAAEAAAD+//j/AQABAAQAAAA=")
tile_set = SubResource("TileSet_lnu2h")

[node name="Zones" type="Node2D" parent="." unique_id=1256535488]

[node name="ContaminatedZone" type="Area2D" parent="Zones" unique_id=305362582 node_paths=PackedStringArray("DamageTimer")]
script = ExtResource("4_lbhrr")
DamageTimer = NodePath("Timer")
DamageCurve = SubResource("Curve_lbhrr")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Zones/ContaminatedZone" unique_id=1303028849]
position = Vector2(-415.99997, -1120)
scale = Vector2(1.630286, 2.7579436)
polygon = PackedVector2Array(677.18176, 46.411377, 652.64624, -136.3335, -544.6897, -133.43274, -542.1201, 35.495087, -224.67987, 37.21173, -225.72726, 139.23419, 44.164032, 142.1349, 44.164032, 40.609985)

[node name="Timer" type="Timer" parent="Zones/ContaminatedZone" unique_id=1227960839]

[node name="ContaminatedZone2" type="Area2D" parent="Zones" unique_id=675318557 node_paths=PackedStringArray("DamageTimer")]
script = ExtResource("4_lbhrr")
DamageTimer = NodePath("Timer")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Zones/ContaminatedZone2" unique_id=1680150201]
position = Vector2(1608, -1040.0001)
scale = Vector2(1.630286, 2.7579436)
polygon = PackedVector2Array(-196.28455, 23.205719, -117.77075, -641.05725, -549.5968, -620.7523, -542.1201, 35.495087)

[node name="Timer" type="Timer" parent="Zones/ContaminatedZone2" unique_id=917791582]

[node name="ContaminatedZone3" type="Area2D" parent="Zones" unique_id=1838403500 node_paths=PackedStringArray("DamageTimer")]
script = ExtResource("4_lbhrr")
DamageTimer = NodePath("Timer")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Zones/ContaminatedZone3" unique_id=706735182]
position = Vector2(-503.99997, -2736)
scale = Vector2(1.630286, 2.7579436)
polygon = PackedVector2Array(-29.442719, 98.62421, -24.535583, -69.61713, 1197.3359, -55.113464, 1162.9861, -362.58905, -588.85376, -356.78754, -510.3399, 98.62421)

[node name="Timer" type="Timer" parent="Zones/ContaminatedZone3" unique_id=795097878]

[node name="ContaminatedZone4" type="Area2D" parent="Zones" unique_id=942502928 node_paths=PackedStringArray("DamageTimer")]
script = ExtResource("4_lbhrr")
DamageTimer = NodePath("Timer")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Zones/ContaminatedZone4" unique_id=1639985781]
position = Vector2(-330.40002, -1919.1998)
scale = Vector2(1.630286, 2.7579436)
polygon = PackedVector2Array(264.9842, 136.3335, 260.0771, -313.27692, -112.86365, -319.0783, -98.142334, -150.83698, -596.14575, -150.5794, -613.3893, 133.43274)

[node name="Timer" type="Timer" parent="Zones/ContaminatedZone4" unique_id=1792316255]

[node name="ContaminatedZone5" type="Area2D" parent="Zones" unique_id=561408620 node_paths=PackedStringArray("DamageTimer")]
script = ExtResource("4_lbhrr")
DamageTimer = NodePath("Timer")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Zones/ContaminatedZone5" unique_id=56053599]
position = Vector2(1021.6, -1711.1998)
scale = Vector2(1.630286, 2.7579436)
polygon = PackedVector2Array(-196.28455, 23.205719, -211.00595, -374.19183, -515.2471, -374.19183, -542.1201, 35.495087)

[node name="Timer" type="Timer" parent="Zones/ContaminatedZone5" unique_id=1180351973]

[node name="PuzzleTerminal2D" parent="." unique_id=598227121 instance=ExtResource("4_p57ef")]
position = Vector2(-168, -632)
PuzzleHostPath = NodePath("../UI/PuzzleLayer/PuzzleHost")

[node name="UI" type="CanvasLayer" parent="." unique_id=1993261319]

[node name="ColorRect" type="ColorRect" parent="UI" unique_id=1212999955]
visible = false
material = SubResource("ShaderMaterial_p57ef")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="PuzzleLayer" type="Control" parent="UI" unique_id=1344310281]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="PuzzleHost" type="Control" parent="UI/PuzzleLayer" unique_id=2094422790]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("9_0tnpc")
PuzzleCatalog = Array[ExtResource("11_trtic")]([SubResource("Resource_ir15t"), SubResource("Resource_ca42v")])
PuzzleLayerPath = NodePath("..")
PlayerPath = NodePath("../../../Player")

[node name="StaticBody2D" type="StaticBody2D" parent="." unique_id=1446716266]

[node name="Sprite2D" type="Sprite2D" parent="StaticBody2D" unique_id=313759922]
z_index = -1
position = Vector2(-726, -153)
scale = Vector2(4, 4)
texture = ExtResource("12_kvuet")

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D" unique_id=411975384]
position = Vector2(-726, -109)
shape = SubResource("RectangleShape2D_dinhu")

[node name="PuzzleTerminal2D2" parent="." unique_id=828141489 instance=ExtResource("4_p57ef")]
position = Vector2(-406, 210)
PuzzleHostPath = NodePath("../UI/PuzzleLayer/PuzzleHost")
PuzzleId = "hanoi"
